from transformers import AutoTokenizer, AutoModelForSequenceClassification
import torch

text = """"For all his personal grievances over the "woke mind virus," Musk is still the CEO of Tesla and an electric-vehicle pioneer. On its face, a second Trump presidency would be bad for companies trying to move the country away from fossil fuels. But on a Tuesday call with Tesla's investors, Musk's reasons for his support became crystal clear.Rather than worrying about society's move to an all-electric future, Musk is mainly concerned about maintaining Tesla's dominant position in the EV market. The Inflation Reduction Act, one of President Joe Biden's defining legislative accomplishments, helped spur legacy carmakers to enter the EV game in earnest. As market competition heated up, Tesla started cutting prices, which turned into an industrywide price war that Tesla isn't winning. Over the past year, Tesla's profits have fallen by 45%, and the company's market share has withered. Kelley Blue Book said that in the second quarter of this year, overall EV sales in the US increased, but Tesla's share of those sales fell below 50% for the first time in the company's history. It's a steep fall, considering Tesla's share of the EV market used to be as high as 80%. Without a new model to sell (unless you count the Cybertruck for some reason) and facing even more cutthroat competition in China, Tesla is under pressure all over the world.Musk opened the company's investor call by saying the wave of competition killing its profits and shrinking its market share would pass, but he didn't offer any reasoning. When asked if he was worried about Trump repealing the IRA, Musk tipped his hand. He told investors that the move would be "devastating" for Tesla's competitors but less so for Tesla — in fact, "long term," he said, it would be good for Tesla. In essence this was an admission that Musk's best hope is that Trump returns to the White House and dismantles the regulatory regime that has encouraged legacy automakers to enter the EV market. The best thing for Tesla is if US legacy automakers like GM and Ford sit on the sidelines.The irony is that while Musk may want the IRA gone, Tesla is still raking it in from government tax credits that predate the law. These are credits that EV makers can sell to combustion-engine carmakers to offset the latter's carbon emissions — the slower legacy automakers are to get into the EV game, the more Tesla can sell. And sell they are: Tesla made a life-saving $890 million in these credits last quarter, doubling its haul from the quarter before. Musk happily accepts government intervention, but only when it's for Tesla and not its competition.Musk and Trump have the same policy goal for EVs: to tear up Biden's EV regulatory infrastructure and revert to the old structure. Or maybe — if Musk's money gets some say in the White House — let him dream up some new rules that work for him. What it seems Musk and Trump most have in common is that they are both dedicated to law and order — so long as they write the laws and make orders. A quarter of fantasyIt's not hard to see why Tesla is losing its dominant edge: The company is moving too slowly. Its last fresh model, the Model Y, came out in 2019. Since then, the company has come under competitive pressure for the first time. In China, it's battling state-backed automakers that are producing state-of-the-art models for cheap. In the US, Legacy Auto is beginning to martial its forces to offer consumers more variety and — let's be real here — an alternative to Musk's cult of personality.To maintain its market position, Tesla started slashing its prices in 2023. That kicked off the global EV price war. Critics balked, but Musk assured the Tesla community that this was the only strategy to save the company. By the third quarter of 2023, the price war had started ravaging Tesla's balance sheet. When it announced results in October, the company fell well short of expectations for revenue, vehicle deliveries, and free cash flow, which was down to $848 million from $3.4 billion a year before. Gross margins — a measure of the company's profitability after costs — continued to shrink. For investors, this was a return to darker days at the company. Tesla turned its first annual profit in 2020 and was purported to be on a stable path from that day forth. Its sudden financial backslide triggered Wall Street's PTSD — Tesla's stock fell by more than 40% over the following six months. Musk threw out absolutely every trick he has ever trotted out in the past few years to regain Wall Street's confidence. Musk stopped the bleeding in April by doing what he does best: talking up a world of fantastic innovations the company hasn't built yet. Tesla, he said, is not a car company; it is an AI company. He promised autonomous robotaxis by August, never mind that Musk has been promising the robotaxi for about a decade. He said the company was making headway with a new humanoid robot called Optimus — never mind that when Tesla unveiled Optimus it was a person dancing in a robot costume, and Tesla still won't say which tasks it can do. Musk glazed over the product the world really wants to see, a cheaper Tesla priced at about $25,000 to $30,000. Without providing more detail, he mentioned that those models would start rolling out of factories in the first half of 2025, never mind that Musk has been saying something like that since 2018. Musk threw out absolutely every trick he has ever trotted out in the past few years to regain Wall Street's confidence. And it worked. Despite warning signs about the company's ability to deliver, Wall Street seemed confident that Musk would pull off some miraculous turnaround. The stock rallied.That brings us to now and to Tesla's second-quarter earnings report. The results showed that — AI company or not — Tesla is still hurting because of new EV-market competition. The price war is still torching operating margins, which have slimmed to 6.3% from 9.6% a year ago. And automotive-sales revenue is down 7% from this time last year, even as legacy automakers announced a slowdown in their rollout of EVs due to the price war and a lack of demand. That's why, in Musk's fantastic future, the IRA is repealed and it is "devastating for our competitors and for Tesla slightly," as he said. He went on to say that investors shouldn't even think about Tesla as a car company with car-company competitors anyway."The value of Tesla overwhelmingly is autonomy," he said. "These other things are, I think, no way it's relative to autonomy."This after he announced that Tesla's August robotaxi launch was delayed to October, if you can believe it.Capitalism for me and not for theeMusk is looking for ways to buy time for Tesla. Enter Trump, who has promised to eliminate Biden's IRA, a law that created tax incentives for purchases of new electric-vehicle models. Musk would like to see those incentives removed — not because they distort a fair market or because he opposes government handouts, but because they help his competition more than him. This is not to say Musk's company is forgoing these credits; it just has to do more work to get them because its fleet of cars is older. Tesla told investors it was changing Model 3 trims to qualify more cars for IRA money. But, of course, it still has to sell those cars to get that cash, and that's much harder to do when your competitors can roll out newer, fresher models. Instead of competing on quality, Musk wants to bend the rules to work in his favor. While Musk may dislike the IRA, there are other regulations Tesla makes money from that do not require the company to do anything at all. They do, however, work a lot better when Tesla's competitors sell fewer cars. These are zero-emission vehicle credits: In a growing number of states, automakers must make a certain percentage of their vehicles emission-free or face a penalty. If a company doesn't hit that threshold, it can buy ZEV credits from an automaker that makes cars with radically reduced emissions, like an EV maker. Since Tesla is a pure EV company, it has a lot of extra ZEV credits to sell off to companies still churning out gas-powered cars. This business is lucrative for Tesla: ZEV-credit sales made up 68% of the company's $1.3 billion of free cash flow last quarter. Of course, if automakers sell their own EVs, offsetting their own carbon emissions, they don't have to buy as many credits from Tesla. The tap of free money dries up, and Tesla has to figure out how to sell more cars. Musk is looking for ways to buy time for Tesla — and one of those ways is to get Trump elected. Trump hasn't said anything about EV credits. But the Heritage Foundation's Project 2025 plan, which serves as a potential template for a second Trump administration, proposes eliminating government subsidies for EVs and lowering fuel-economy standards for combustion-engine cars. Musk probably figures the conservative super PAC to which he's contributing $45 million a month can take some of the edges off of that for Tesla while getting rid of the IRA incentives that are making life harder. On Tesla's quarterly call, its chief financial officer, Vaibhav Taneja, took a moment for some patriotism, saying Tesla prides itself on being the company "with the most American-made cars." Taneja can "USA, USA, USA" all he wants, but Tesla's Shanghai factory became the lynchpin of the business after its opening saved the company from bankruptcy in 2019. Hearing that kind of patriotism is odd on a Tesla call. Musk is usually praising China's leaders.But Trump offers Tesla a unique opportunity in the US. Musk knows he needs to slow competition any way he can. Preserving Tesla's market position is imperative until he can conjure another product that people are excited to buy. If that involves supporting someone who imperils the global climate-saving agenda, oh well. At a certain point, Tesla stopped being about the world and became about Elon — or maybe it always was, and now that the pressure's on, it's impossible to hide.Linette Lopez is a senior correspondent at Business Insider."""


def getBias(text):
    tokenizer = AutoTokenizer.from_pretrained("bert-base-cased")

    model = AutoModelForSequenceClassification.from_pretrained("bucketresearch/politicalBiasBERT")


    inputs = tokenizer(text, return_tensors="pt", padding='max_length', truncation=True, max_length=512)

    # Create labels (as expected by the model)
    labels = torch.tensor([0])

    # Run the model
    outputs = model(**inputs, labels=labels)
    loss, logits = outputs[:2]


    # [0] -> left 
    # [1] -> center
    # [2] -> right
    print(logits.softmax(dim=-1)[0].tolist())
    return (logits.softmax(dim=-1)[0].tolist())

getBias(text)

